var requirejs,require,define;!function(global,setTimeout){function commentReplace(a,b){return b||""}function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(!d||"object"!=typeof b||!b||isArray(b)||isFunction(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),mixin(a[e],b,c,d)))}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttps://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;b<a.length;b++)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(0===b||1===b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=c&&c.split("/"),r=x.map,s=r&&r["*"];if(a&&(a=a.split("/"),k=a.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(a[k])&&(a[k]=a[k].replace(jsSuffixRegExp,"")),"."===a[0].charAt(0)&&q&&(p=q.slice(0,q.length-1),a=p.concat(a)),b(a),a=a.join("/")),d&&r&&(q||s)){g=a.split("/");a:for(h=g.length;h>0;h-=1){if(j=g.slice(0,h).join("/"),q)for(i=q.length;i>0;i-=1)if(f=getOwn(r,q.slice(0,i).join("/")),f&&(f=getOwn(f,j))){l=f,m=h;break a}!n&&s&&getOwn(s,j)&&(n=getOwn(s,j),o=h)}!l&&n&&(l=n,m=o),l&&(g.splice(0,m,l),a=g.join("/"))}return e=getOwn(x.pkgs,a),e?e:a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(F+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=d?a:h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):-1===a.indexOf("!")?c(a,l,e):a:(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(G+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(each(globalDefQueue,function(a){var b=a[0];"string"==typeof b&&(u.defQueueMap[b]=!0),B.push(a)}),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c=1e3*x.waitSeconds,f=c&&u.startTime+c<(new Date).getTime(),g=[],h=[],i=!1,k=!0;if(!s){if(s=!0,eachProp(z,function(a){var c=a.map,j=c.id;if(a.enabled&&(c.isDefine||h.push(a),!a.error))if(!a.inited&&f)e(j)?(b=!0,i=!0):(g.push(j),d(j));else if(!a.inited&&a.fetched&&c.isDefine&&(i=!0,!c.prefix))return k=!1}),f&&g.length)return a=makeError("timeout","Load timeout for modules: "+g,null,g),a.contextName=u.contextName,j(a);k&&each(h,function(a){m(a,{},{})}),f&&!b||!i||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}u.defQueueMap={}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E={},F=1,G=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?C[a.map.id]=a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return getOwn(x.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&void 0===e&&(b=this.module,b?e=b.exports:this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;if(this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad)){var h=[];each(this.depMaps,function(a){h.push(a.normalizedMap||a)}),req.onResourceLoad(u,this.map,h)}l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(u.defQueueMap,c)||this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=getOwn(E,this.map.id),n=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,p=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(n=d.normalize(n,function(a){return c(a,o,!0)})||""),f=g(a.prefix+"!"+n,this.map.parentMap,!0),i(f,"defined",bind(this,function(a){this.map.normalizedMap=f,this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),void(k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):m?(this.map.url=u.nameToUrl(m),void this.load()):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),p([f],e)}),void d.load(a.name,p,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.undefed||(this.defineDep(b,a),this.check())})),this.errback?i(a,"error",bind(this,this.errback)):this.events.error&&i(a,"error",bind(this,function(a){this.emit("error",a)}))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,defQueueMap:{},Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){if(a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/"),"string"==typeof a.urlArgs){var b=a.urlArgs;a.urlArgs=function(a,c){return(-1===c.indexOf("?")?"?":"&")+b}}var c=x.shim,d={paths:!0,bundles:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?(x[b]||(x[b]={}),mixin(x[b],a,!0,!0)):x[b]=a}),a.bundles&&eachProp(a.bundles,function(a,b){each(a,function(a){a!==b&&(E[a]=b)})}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&each(a.packages,function(a){var b,c;a="string"==typeof a?{name:a}:a,c=a.name,b=a.location,b&&(x.paths[c]=a.location),x.pkgs[c]=a.name+"/"+(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b,null,!0))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);e.undefed=!0,d(a),delete C[a],delete D[c.url],delete A[a],eachReverse(B,function(b,c){b[0]===a&&B.splice(c,1)}),delete u.defQueueMap[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(u.defQueueMap={},d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k=getOwn(x.pkgs,a);if(k&&(a=k),j=getOwn(E,a))return u.nameToUrl(j,b,c);if(req.jsExtRegExp.test(a))h=a+(b||"");else{for(d=x.paths,e=a.split("/"),f=e.length;f>0;f-=1)if(g=e.slice(0,f).join("/"),i=getOwn(d,g)){isArray(i)&&(i=i[0]),e.splice(0,f,i);break}h=e.join("/"),h+=b||(/^data\:|^blob\:|\?/.test(h)||c?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+h}return x.urlArgs&&!/^blob\:/.test(h)?h+x.urlArgs(a,h):h},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);if(!e(b.id)){var c=[];return eachProp(y,function(a,d){0!==d.indexOf("_@r")&&each(a.depMaps,function(a){return a.id===b.id?(c.push(d),!0):void 0})}),j(makeError("scripterror",'Script error for "'+b.id+(c.length?'", needed by: '+c.join(", "):'"'),a,[b.id]))}}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a,b,c){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,e.onNodeCreated&&e.onNodeCreated(d,e,b,c),currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{setTimeout(function(){},0),importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),e?(e.defQueue.push([a,b,c]),e.defQueueMap[a]=!0):globalDefQueue.push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("jquery",[],function(){"use strict";return window.jQuery}),define("nerve/utils/helpers",["jquery"],function(a){"use strict";return{isArray:function(a){return Array.isArray(a)},toString:function(a){return Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===this.toString(a)},isNode:function(a){return a&&a.nodeType||this.isNodeList(a)},isNodeList:function(a){return!this.isjQueryObject(a)&&a&&a[0]&&a[0].nodeType},isjQueryObject:function(b){return b instanceof a},isObject:function(b){var c=!1;return c=window.Object?b===window.Object(b)&&!this.isNode(b)&&!this.isFunction(b)&&!this.isjQueryObject(b):b&&"[object Object]"===a.toString(b)&&!this.isNode(b)&&!this.isFunction(b)&&!this.isjQueryObject(b)},isPlainObject:function(b){return this.isObject(b)&&a.isPlainObject(b)},isString:function(a){return"[object String]"===this.toString(a)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},extend:a.extend}}),define("utils/event",["nerve/utils/helpers"],function(a){"use strict";function b(){this.listeners={}}return b.prototype={on:function(b,c,d){return"function"==typeof c&&void 0===d&&(d=c,c=void 0),a.isArray(this.listeners[b])||(this.listeners[b]=[]),a.isFunction(d)&&this.listeners[b].push(d),this},one:function(b,c){return a.isFunction(c)&&(c.isOne=!0,this.on(b,c)),this},off:function(b,c){return a.isArray(this.listeners[b])&&(a.isFunction(c)?this.listeners[b].forEach(function(a,d){a===c&&this.listeners[b].splice(d,1)}.bind(this)):this.listeners[b]=[]),this},trigger:function(b,c){return a.isArray(this.listeners[b])&&this.listeners[b].forEach(function(a){a({type:b},c),a.isOne&&this.off(b,a)}),this}},b}),define("utils/helpers",["jquery"],function(a){"use strict";return{isArray:function(a){return Array.isArray(a)},toString:function(a){return Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===this.toString(a)},isNode:function(a){return a&&a.nodeType||this.isNodeList(a)},isNodeList:function(a){return!this.isjQueryObject(a)&&a&&a[0]&&a[0].nodeType},isjQueryObject:function(b){return b instanceof a},isObject:function(b){var c=!1;return c=window.Object?b===window.Object(b)&&!this.isNode(b)&&!this.isFunction(b)&&!this.isjQueryObject(b):b&&"[object Object]"===a.toString(b)&&!this.isNode(b)&&!this.isFunction(b)&&!this.isjQueryObject(b)},isPlainObject:function(b){return this.isObject(b)&&a.isPlainObject(b)},isString:function(a){return"[object String]"===this.toString(a)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},extend:a.extend}}),define("event",["utils/event","utils/helpers"],function(a,b){"use strict";function c(c){return this.options=b.extend(!0,{},this.defaultOptions,c),this._event=new a,this.initVars().generateAccessors(),this}return c.prototype={accessors:{get:[],set:[]},init:function(){return this},destroy:function(){return this.isDestroyed||(this.trigger("destroy"),this.off(),delete this.options,delete this._event,this.isDestroyed=!0),this},on:function(){return this._event&&this._event.on.apply(this._event,arguments),this},off:function(){return this._event&&this._event.off.apply(this._event,arguments),this},trigger:function(){return this._event&&this._event.trigger.apply(this._event,arguments),this},require:function(a,c){var d,e=[],f={};return b.isArray(a)?(a.forEach(function(a){var b;e.push(new Promise(function(c,d){b=this.deferred[a]||a,window.requirejs([b],function(a){f[b]=a,c()},d)}.bind(this)))}.bind(this)),d=new Promise(function(d,g){Promise.all(e).then(function(){var e=[];a.forEach(function(a){var b=this.deferred[a]||a;e.push(f[b])}.bind(this)),this.isDestroyed||(d.apply(this,e),b.isFunction(c)&&c.apply(this,e))}.bind(this))["catch"](g)}.bind(this))):d=new Promise(function(d,e){window.requirejs([this.deferred[a]||a],function(){this.isDestroyed||(b.isFunction(c)&&c.apply(this,arguments),d.apply(this,arguments))}.bind(this),e)}.bind(this)),d},initVars:function(){return b.isPlainObject(this.vars)&&Object.keys(this.vars).forEach(function(a){this[a]=this.vars[a]}.bind(this)),this},generateAccessors:function(){return b.isArray(this.accessors.get)&&this.accessors.get.forEach(function(a){this["get"+b.capitalize(a)]=function(){return this[a]}}.bind(this)),b.isArray(this.accessors.set)&&this.accessors.set.forEach(function(a){this["set"+b.capitalize(a)]=function(b){return this[a]=b,this}}.bind(this)),this}},c.extend=function(a){var c,d,e,f,g,h,i=this;return c=function(){return i.apply(this,arguments),b.isFunction(a.create)&&a.create.apply(this,arguments),a.autoInit&&!c.instance&&(this.autoInit=a.autoInit,this._inited||this.isDestroyed||(this.init(),this._inited=!0)),a.singleton!==!0||c.instance||(c.instance=this),c.instance||this},b.extend(c,i),d=function(){this.constructor=c,this.__super__=i.prototype},d.prototype=i.prototype,c.prototype=new d,c.__super__=i.prototype,f=a["public"]||{},g=a["protected"]||{},h=a["static"]||{},e=a.props||{},e.defaultOptions=b.extend(!0,{},i.prototype.defaultOptions,e.defaultOptions),e.deferred=b.extend(!0,{},i.prototype.deferred,e.deferred),e.events=b.extend(!0,{},i.prototype.events,e.events),e.defaults=b.extend(!0,{},i.prototype.defaults,e.defaults),e.templates=b.extend(!0,{},i.prototype.templates,e.templates),e.elements=b.extend(!0,{},i.prototype.elements,e.elements),e.vars=b.extend(!0,{},i.prototype.vars,e.vars),e.accessors&&(b.isArray(e.accessors.get)&&(e.accessors.get=e.accessors.get.concat(i.prototype.accessors.get)),b.isArray(e.accessors.set)&&(e.accessors.set=e.accessors.set.concat(i.prototype.accessors.set))),b.extend(c.prototype,b.extend(!0,{},f,g,e)),b.extend(!0,c,h),c},c}),define("utils/ajax",["jquery"],function(a){"use strict";var b={send:function(b){var c=a.ajax(b);return{success:function(a){return c.success(a)},error:function(a){return c.error(a)},abort:function(){return c.abort()}}}};return b}),function(a,b){"use strict";var c=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var c=function(a,b,d){return 1===arguments.length?c.get(a):c.set(a,b,d)};return c._document=a.document,c._cacheKeyPrefix="cookey.",c._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),c.defaults={path:"/",secure:!1},c.get=function(a){c._cachedDocumentCookie!==c._document.cookie&&c._renewCache();var d=c._cache[c._cacheKeyPrefix+a];return d===b?b:decodeURIComponent(d)},c.set=function(a,d,e){return e=c._getExtendedOptions(e),e.expires=c._getExpiresDate(d===b?-1:e.expires),c._document.cookie=c._generateCookieString(a,d,e),c},c.expire=function(a,d){return c.set(a,b,d)},c._getExtendedOptions=function(a){return{path:a&&a.path||c.defaults.path,domain:a&&a.domain||c.defaults.domain,expires:a&&a.expires||c.defaults.expires,secure:a&&a.secure!==b?a.secure:c.defaults.secure}},c._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},c._getExpiresDate=function(a,b){if(b=b||new Date,"number"==typeof a?a=a===1/0?c._maxExpireDate:new Date(b.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!c._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},c._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},c._getCacheFromString=function(a){for(var d={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=c._getKeyValuePairFromCookieString(e[f]);d[c._cacheKeyPrefix+g.key]===b&&(d[c._cacheKeyPrefix+g.key]=g.value)}return d},c._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");b=0>b?a.length:b;var c,d=a.substr(0,b);try{c=decodeURIComponent(d)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+d+'"',e)}return{key:c,value:a.substr(b+1)}},c._renewCache=function(){c._cache=c._getCacheFromString(c._document.cookie),c._cachedDocumentCookie=c._document.cookie},c._areEnabled=function(){var a="cookies.js",b="1"===c.set(a,1).get(a);return c.expire(a),b},c.enabled=c._areEnabled(),c},d=a&&"object"==typeof a.document?c(a):c;"function"==typeof define&&define.amd?define("components/Cookies/dist/cookies",[],function(){return d}):"object"==typeof exports?("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=d),exports.Cookies=d):a.Cookies=d}("undefined"==typeof window?this:window),define("utils/cookie",["components/Cookies/dist/cookies"],function(a){"use strict";return a}),define("model",["event","utils/ajax","utils/helpers","utils/cookie"],function(a,b,c,d){"use strict";var e,f=0;return e=a.extend({create:function(a,b){return this._attr=c.extend(!0,{},this.defaults,a),this.options=c.extend(!0,{},this.defaultOptions,b),this.id=this._attr.id,this.cid=f++,this.errors=[],this.isFetchedState=!1,this.isRemovedState=!1,this.delegateEvents(),this.init(),this},props:{url:"",urlSave:"",urlCreate:"",urlRemove:"",validation:[]},"public":{destroy:function(){return delete this._attr,delete this.id,delete this.cid,delete this.errors,e.__super__.destroy.call(this),this},getSingle:function(a){for(var b=a.split("."),c=0,d=this._attr;d&&c<b.length;)d=void 0!==d[b[c]]?d[b[c]]:void 0,c++;return d},setSingle:function(a,b,d){var e=!1;return d=d||{},this._attr[a]!==b&&(c.isString(b)&&(b=String(b).trim()),this._attr[a]=b,"id"===a&&(this.id=b),d.silent||d.isNotChangeTrigger||(this.trigger("change."+a),this.trigger("change")),e=!0),e},get:function(a){var b=null;return c.isString(a)&&(b=this.getSingle(a)),c.isArray(a)&&(b={},a.forEach(function(a){b[a]=this.getSingle(a)}.bind(this))),b},set:function(a,b,d){var e=[];return c.isString(a)&&this.setSingle(a,b,c.extend({},d,{isNotChangeTrigger:!0}))&&this.trigger("change."+a),c.isObject(a)&&(d=b,Object.keys(a).forEach(function(b){this.setSingle(b,a[b],c.extend({},d,{isNotChangeTrigger:!0}))&&e.push(b)}.bind(this)),d&&d.silent||e.forEach(function(a){this.trigger("change."+a)}.bind(this))),d&&d.silent||this.trigger("change"),this},validate:function(a){return this.errors=[],this.validation.forEach(function(b){var d;if(d=0===String(b.value).indexOf("@")?this.get(b.value.slice(1)):b.value,!c.isFunction(b.condition)||b.condition.call(this,a))switch(b.type){case"eq":b.attr.forEach(function(a){b.attr.forEach(function(c){b.byLength?String(this.get(a)).length===String(this.get(c)).length&&this.errors.push(b.errorCode):this.get(a)!==this.get(c)&&this.errors.push(b.errorCode)}.bind(this))}.bind(this));break;case"lt":b.attr.forEach(function(a){var e,f=this.get(a);b.byLength?(e=c.isArray(f)?f.length:String(f).length,(b.strict&&e>d||!b.strict&&e>=d)&&this.errors.push(b.errorCode)):(b.strict&&f>d||!b.strict&&f>=d)&&this.errors.push(b.errorCode)}.bind(this));break;case"gt":b.attr.forEach(function(a){var e,f=this.get(a);b.byLength?(e=c.isArray(f)?f.length:String(f).length,(b.strict&&d>e||!b.strict&&d>=e)&&this.errors.push(b.errorCode)):(b.strict&&d>f||!b.strict&&d>=f)&&this.errors.push(b.errorCode)}.bind(this));break;case"required":b.attr.forEach(function(a){var d=this.get(a),e=c.isArray(d)&&0===d.length||!d;e&&this.errors.push(b.errorCode)}.bind(this));break;case"regexp":b.attr.forEach(function(a){d.test(this.get(a))||this.errors.push(b.errorCode)}.bind(this))}}.bind(this)),0===this.errors.length},toJSON:function(){return c.extend(!0,{},this._attr)},fetch:function(){return new Promise(function(a,d){this.fetchXHR=b.send(c.extend(this.getFetchSettings(),{url:this.url,data:this.getFetchParams()})),this.fetchXHR.success(function(b,d,e){var f=this.getResponeObjectByXhr(e);this.isDestroyed||(c.isString(b)&&(b=JSON.parse(b)),this.set(this.adapter(b)),this.isFetchedState=!0,c.isFunction(this.onFetched)&&this.onFetched(b),this.trigger("fetched",f),a(b,f))}.bind(this)).error(function(a){var b=this.getResponeObjectByXhr(a);this.trigger("fetched",b),d(b)}.bind(this))}.bind(this))},save:function(){return this.trigger("beforeSave"),new Promise(function(a,d){var e={mode:"save"};this.validate(e)?b.send(c.extend(this.getSaveSettings(),{url:this.urlSave,data:this.getSaveParams()})).success(function(b){c.isString(b)&&(b=JSON.parse(b)),this.trigger("saved"),a(b)}.bind(this)).error(d):d()}.bind(this))},create:function(){return this.trigger("beforeCreate"),new Promise(function(a,d){var e={mode:"create"};this.validate(e)?b.send(c.extend(this.getCreateSettings(),{url:this.urlCreate,data:this.getCreateParams()})).success(function(b){c.isString(b)&&(b=JSON.parse(b)),this.trigger("created"),a(b)}.bind(this)).error(d):d()}.bind(this))},remove:function(){return this.trigger("beforeRemove"),this.isRemovedState=!0,new Promise(function(a,d){this.isRemoveReady()?b.send(c.extend(this.getRemoveSettings(),{url:this.urlRemove,data:this.getRemoveParams()})).success(function(b){c.isString(b)&&(b=JSON.parse(b)),this.trigger("removed"),a(b)}.bind(this)).error(d):(this.trigger("removed"),d())}.bind(this))},abort:function(){return this.fetchXHR&&(this.fetchXHR.abort(),this.trigger("aborted")),this},fetched:function(){return new Promise(function(a){this.isFetched()?a():this.on("fetched",function(){a()})}.bind(this))},setResponse:function(a){return this.set(this.adapter(a)),this},isFetched:function(){return this.isFetchedState},isRemoved:function(){return this.isRemovedState},isRemoveReady:function(){return!!this.get(this.uniqueKey)},isPending:function(){return this.fetchXHR&&"pending"===this.fetchXHR.state()}},"protected":{uniqueKey:"id",delegateEvents:function(){return this.events&&Object.keys(this.events).forEach(function(a){this.on(a,this[this.events[a]].bind(this))}.bind(this)),this},adapter:function(a){return a},getUrl:function(){return(d.get("_sp_model")||"")+this.url},getFetchParams:function(){var a={};return a[this.uniqueKey]=this.get(this.uniqueKey),a},getSaveParams:function(){return c.extend(!0,{},this.toJSON())},getCreateParams:function(){return c.extend(!0,{},this.toJSON())},getRemoveParams:function(){return c.extend(!0,{},{id:this.get("id")})},getFetchSettings:function(){return{url:this.getUrl()}},getSaveSettings:function(){return{url:this.getUrl(),type:"post"}},getCreateSettings:function(){return{url:this.getUrl(),type:"post",abortCaptcha:function(){
this.trigger("abortCaptcha")}.bind(this)}},getRemoveSettings:function(){return{url:this.getUrl(),type:"post"}},getResponeObjectByXhr:function(a){var b,d;a=a||{},c.isFunction(a.statusCode)&&(b=a.statusCode().status);try{d=JSON.parse(a.responseText)}catch(e){d=a.responseText}return{status:b,response:d}}}})}),define("view",["jquery","event","utils/helpers"],function(a,b,c){"use strict";var d,e={};return d=b.extend({create:function(){return this.model=this.options.model,this.$el=a(),this.$els=a(),this.el=null,this._domEventHandlers={},this.promiseRender=new Promise(function(a){this.on("render",a)}.bind(this)),this.promiseCss=new Promise(function(a){this.on("cssLoad",a)}.bind(this)),Promise.all([this.promiseRender,this.promiseCss]).then(this.onViewReady.bind(this)),this.loadCss(),this},props:{css:[],events:{},elements:{},optionsSelector:'script[type="text/plain"]',autoRemove:!0},"public":{destroy:function(){return this.isDestroyed||(this.unDelegateEvents(),c.isjQueryObject(this.$el)&&(this.$el.off(),this.autoInit&&this.autoRemove&&this.$el.remove()),c.isjQueryObject(this.$els)&&(this.$els.off(),this.autoInit&&this.autoRemove&&this.$els.remove()),delete this.$el,delete this.el,delete this.model,delete this._domEventHandlers),d.__super__.destroy.call(this),this},getElement:function(){return this.$el},ready:function(a){return new Promise(function(b){this._isReady?(b(),c.isFunction(a)&&a()):(c.isFunction(a)&&this.on("ready",a),this.on("ready",b))}.bind(this))},render:function(b,d){var e=arguments;return webConsole.time("before render"),new Promise(function(f){var g,h,i,j;b=b||{},c.isFunction(b)&&(d=b,b={}),c.isPlainObject(b)&&!b.template&&(b={data:b}),c.isString(b)&&(b={template:b},c.isPlainObject(d)&&(b.data=d,d=e[2])),this.model&&(h=this.model.toJSON()),i=c.extend(!0,{},h,b.data,{locales:this.options&&this.options.locales||b.locales,options:this.options}),g=b.template||"main",j=this.templates[g]?this.templates[g]:g,webConsole.timeEnd("before render","/logs/render"),j&&(webConsole.time("require template"),this.constructor.getTemplate(j,function(e){var h,j;webConsole.timeEnd("require template","/logs/render"),this.isDestroyed||(webConsole.time("handlebars"),h=e(i).trim(),webConsole.timeEnd("handlebars","/logs/render"),"plain"===b.type?(f(h),c.isFunction(d)&&d(h)):(webConsole.time("after render"),j=a(h.string?h.string:h),"main"===g?this.setElement(j):(this.options.isCollectElements&&(this.$els=this.$els.add(j)),this.updateElements()),this._isRendered=!0,this.delegateEvents(),c.isFunction(this.onRender)&&"main"===g&&this.onRender(),webConsole.timeEnd("after render","/logs/render"),this.trigger("render",{templateId:g}),f(j),c.isFunction(d)&&d(j)))}.bind(this)))}.bind(this))},isRendered:function(){return this._isRendered},rendered:function(a,b){return new Promise(function(d){this.isRendered()?(d(),c.isFunction(a)&&a()):(c.isFunction(a)&&this.on("render",a,b),this.on("render",d))}.bind(this))},remove:function(b){c.isNode(b)&&(b=a(b)),this.$els.each(function(a,c){c===b.get(0)&&this.$els.splice(a,1)}.bind(this))}},"protected":{setElement:function(b){return c.isjQueryObject(b)?(this.$el=b,this.el=this.$el.get(0)):c.isNode(b)&&(this.$el=a(b),this.el=b),this.updateElements(),this},delegateEvents:function(){return this.isDestroyed||(this.unDelegateEvents(),Object.keys(this.events).forEach(function(b){var d,e,f=b.match(/^(\S+)(?: ([\w\W]*))?/),g=this.events[b],h=!0,i=!1,j=!1,k=!1,l=0,m=f[1],n=f[2];c.isString(g)?d=this[g]:c.isObject(g)&&(d=this[g.method],h=g.delegate!==!1,l=g.throttling,j=g.preventDefault||!1,k=g.stopPropagation||!1),c.isFunction(d)&&(this._domEventHandlers[b]=function(b,c){var e;j&&b.preventDefault(),k&&b.stopPropagation(),e=n?a(b.target).is(n)?a(b.target):a(b.target).closest(n):this.$el,l?i||(i=!0,setTimeout(function(){i=!1},l),d.call(this,e,b,c)):d.call(this,e,b,c)}.bind(this),"input"===m&&a.browser.msie&&a.browser.version<=11&&(m="keyup"),e=this.options.isCollectElements?this.$el.add(this.$els):this.$el,n?h?e.on(m,n,this._domEventHandlers[b]):e.find(n).on(m,this._domEventHandlers[b]):e.on(m,this._domEventHandlers[b]))}.bind(this))),this},unDelegateEvents:function(){return this.isDestroyed||Object.keys(this.events).forEach(function(a){var b=a.match(/^(\S+)(?: ([\w\W]*))?/),d=b[1],e=b[2];this._domEventHandlers&&c.isFunction(this._domEventHandlers[a])&&c.isjQueryObject(this.$el)&&(e?this.$el.add(this.$els).off(d,e,this._domEventHandlers[a]):this.$el.add(this.$els).off(d,this._domEventHandlers[a]))}.bind(this)),this},updateElements:function(){return c.isjQueryObject(this.$el)&&Object.keys(this.elements).forEach(function(b){var c,d,e=this.elements[b];this.options.isCollectElements?(c=this.$el.add(this.$els).find(e).add(this.$els.filter(e)),0===c.size()&&(d=this.$el.filter(e),0!==d.size()&&(c=d)),0===c.size()&&this.$els.each(function(b,d){a(d).is(e)&&(c=a(d))})):c=this.$el.find(e),this["$"+b]=c}.bind(this)),this},clearEls:function(){return this.$els=a(),this},parseOptions:function(){var a;try{a=JSON.parse(this.$el.find(this.optionsSelector).html().replace(/\r|\n|\t|\s{2,}/g,""))}catch(b){a={}}this.options=c.extend(!0,{},this.defaultOptions,this.options,a)},loadCss:function(){var a=[];this.css.forEach(function(b){a.push(new Promise(function(a){window.requirejs(["util/css-manager"],function(c){c.require(b,a)})}))}),Promise.all(a).then(this.trigger.bind(this,"cssLoad"))},onViewReady:function(){this.trigger("ready"),this._isReady=!0}},"static":{create:function(a){var b=new this(a);return{onLoad:function(a,c){return b.setElement(a),b.loadCss(),b.parseOptions(),b.delegateEvents(),c||b.init(),b},onUnload:function(){return b.destroy(),b}}},createRunTime:function(b,d,e){return c.isjQueryObject(b)&&(d=b,b={}),c.isNode(b)&&(d=a(b),b={}),!c.isjQueryObject(d)&&c.isNode(d)&&(d=a(d)),this.create(b).onLoad(d,e)},getTemplate:function(a,b){c.isFunction(b)&&(e[a]?b(e[a]):requirejs([a],function(c){e[a]=c,b(c)}))},renderListPlain:function(a){return new Promise(function(b){var d;d=a.data.map(function(b){return this.prototype.render({template:a.template,locales:a.locales,data:b,type:"plain"})}.bind(this)),Promise.all(d).then(function(d){var e=d.join("");c.isFunction(a.callback)&&a.callback(e),b(e)}.bind(this))}.bind(this))},renderList:function(a){return new Promise(function(b){this.renderListPlain({template:a.template||"main",data:a.data,locales:a.locales}).then(function(d){var e,f=[],g={html:d},h=a.viewOptions||{},i=0;if(a.$container&&(e=a.$container.get(0).lastChild,a.$container.append(d),c.isFunction(a.callback)&&a.callback(g),b(g),!a.isNoCreateViews)){for(e=e?e.nextSibling:a.$container.get(0).firstChild;e;)a.models&&(h.model=a.models[i]),f.push(this.createRunTime(c.isArray(h)?h[i]:h,e)),e=e.nextSibling,i++;c.isFunction(a.onViewsCreated)&&a.onViewsCreated(f)}}.bind(this))}.bind(this))}}})}),define("router",["jquery","event","utils/helpers"],function(a,b,c){"use strict";var d=b.extend({autoInit:!0,props:{defaultOptions:{linkSelector:'.js-router-link,.sp-music-booster,[type="booster"]',activeSelector:"js-router-link_active",routes:{}}},create:function(){this.routes={},Object.keys(this.options.routes).forEach(function(a){this.route(a,this.options.routes[a])}.bind(this)),a(window).on("popstate",function(){return this.checkRoutes(window.history.state,!0)}.bind(this)),a(document.body).on("click",this.options.linkSelector,this.onLinkClick.bind(this))},"public":{init:function(a){this.checkRoutes({url:a},!1)},route:function(a,b){var d,e;c.isFunction(b)?d={callback:b}:c.isString(b)?d={module:b}:c.isPlainObject(b)&&(d={module:b.module,callback:b.callback,reload:b.reload}),d&&(d.params=[],e=a.match(/:\w+/g),e&&e.forEach(function(a){d.params.push(a.slice(1))}),a=a.replace(/:\w+/g,"([^/]+)").replace(/\*\w+/g,"(.*?)"),-1===["default","error404","error500"].indexOf(a)&&(a="^"+a+"$"),this.routes[a]=d)},checkRoutes:function(a,b,c){var d=a&&(a.url||a.hash)||window.location.pathname,e=d.split("?")[0].replace(/\/{2,}/g,"/"),f={},g=!1;-1!==d.indexOf("?")&&d.split("?")[1].split("&").forEach(function(a){var b=a.split("=");f[b[0]]=b[1]}),Object.keys(this.routes).forEach(function(a){var d,h=new RegExp(a),i=this.routes[a],j={};h.test(e)&&(d=h.exec(e).slice(1),i.params.forEach(function(a,b){j[a]=d[b]}),b&&(i.reload||this.currentRoute&&this.currentRoute.reload)?location.reload():this.proccessingRoute(i,j,f,b,c),this.currentRoute=i,g=!0)}.bind(this)),!g&&this.routes["default"]&&this.proccessingRoute(this.routes["default"],{},f,b,c)},error404:function(a,b){this.proccessingRoute(this.routes.error404,{},{},a,b)},proccessingRoute:function(b,d,e,f,g){c.isFunction(b.callback)&&b.callback(f,d),c.isString(b.module)&&this.require(b.module,function(c){var h=this.currentPage;f?(h&&h.isPending()&&h.abort(),this.currentPage=new c({isRunTimeCreated:!0,request:{params:d,query:e}}),this.trigger("route",{page:this.currentPage}),this.currentPage.isNeedLoad()?g?(this.currentPage.setResponse(g),this.currentPage.onLoadSuccess()):this.currentPage.load():this.currentPage.onLoadSuccess(),this.currentPage.on("render",function(){h&&h.destroy(),setTimeout(function(){this.currentPage.initPage(),this.currentPage.afterInitPage()}.bind(this))}.bind(this))):(this.currentPage=c.createRunTime({isRunTimeCreated:!1,request:{params:d,query:e}},a('[data-routing-page="'+b.module+'"]'),!0),this.trigger("route",{page:this.currentPage}),this.currentPage.initPage(),this.currentPage.afterInitPage())}.bind(this))},go:function(a){window.history.pushState({url:a},null,a),this.checkRoutes({url:a},!0)},navigate:function(a){this.go(a)},update:function(){var a=window.location.pathname+window.location.search;this.go(a)}},"protected":{onLinkClick:function(b){var c=a(b.target),d=c.closest(this.options.linkSelector);return d.size()||(d=c),webConsole.time("full processing page"),b.ctrlKey||b.shiftKey||b.metaKey?!0:(b.preventDefault(),b.stopPropagation(),b.cancelBubble=!0,d.hasClass(this.options.activeSelector)||this.go(d.attr("href").replace(/^http[s]?:\/\/[\w\d\._\-]+/,"")),!1)}},"static":{instance:null,init:function(a){this.instance||(this.instance=new this),this.instance.checkRoutes({url:a},!1)},on:function(){return this.instance||(this.instance=new this),this.instance.on.apply(this.instance,arguments)},off:function(){return this.instance||(this.instance=new this),this.instance.off.apply(this.instance,arguments)},setOptions:function(a){this.instance||(this.instance=new this(a)),this.instance.options=c.extend(!0,{},this.instance.options,a)},route:function(a){this.instance||(this.instance=new this),Object.keys(a).forEach(function(b){this.instance.route(b,a[b])}.bind(this))},"default":function(a){this.instance||(this.instance=new this),this.instance["default"](a)},go:function(a){this.instance||(this.instance=new this),this.instance.go(a)},checkRoutes:function(a,b,c){this.instance||(this.instance=new this),this.instance.checkRoutes(a,b,c)},error404:function(a,b){this.instance||(this.instance=new this),this.instance.error404(a,b)},update:function(){this.instance||(this.instance=new this),this.instance.update()},getCurrentPage:function(){var a=null;return this.instance&&(a=this.instance.currentPage),a}}});return d}),define("collection",["event","utils/ajax","utils/helpers","utils/cookie"],function(a,b,c,d){"use strict";var e=a.extend({create:function(){return this.ajaxSettings=c.extend(this.options.ajaxSettings,{url:this.options.url}),this.ajaxParams=c.extend(!0,{},this.options.ajaxParams),this.items=[],this.offset=0,this.init(),this},props:{url:"",defaultOptions:{ajaxParams:{},limit:50,ajaxSettings:{dataType:"json",type:"get"}}},"public":{destroy:function(){return e.__super__.destroy.call(this),delete this.items,this.fetchXHR&&(this.fetchXHR.abort(),delete this.fetchXHR),this},setParam:function(a,b){return this.ajaxParams[a]=b,this},setParams:function(a){return Object.keys(a).forEach(function(b){this.setParam(b,a[b])}.bind(this)),this},getParam:function(a){return this.ajaxParams[a]},removeParam:function(a){return delete this.ajaxParams[a],this},removeParams:function(){return Object.keys(this.ajaxParams).forEach(function(a){this.removeParam(a)}.bind(this)),this},fetch:function(){return new Promise(function(a,d){var e=this.getFetchParamsWithOffset(),f=this.getFetchSettings()||{},g=c.extend({},f,{url:this.getUrl(),success:function(b){var d;this.isDestroyed||(c.isString(b)?b=JSON.parse(b):c.isObject(b)||(b={}),c.isFunction(f.success)&&f.success(b),d=this.setResponse(b),this.trigger("fetched",{items:d,response:b}),0===d.length&&this.trigger("end"),a(d))}.bind(this),error:function(a,b){c.isFunction(f.error)&&f.error(a,b),this.trigger("fetched",{status:b}),d(b)}.bind(this)});this.fetchXHR=b.send(c.extend(g,{data:e}))}.bind(this))},abort:function(){return this.fetchXHR&&(this.fetchXHR.abort(),this.trigger("aborted")),this},isPending:function(){return this.fetchXHR&&"pending"===this.fetchXHR.state()},setResponse:function(a){var b,d=[],e=this.adapter(a),f=this.getOffsetByResponse(a);return c.isArray(e.items)?(e.items.forEach(function(a){b=new this.model,b.set(a),this.add(b),d.push(b)}.bind(this)),f?this.offset=f:this.offset+=e.items.length,d):d},getOffsetByResponse:function(a){return a?a.offset:0},getOffset:function(){return this.offset},setOffset:function(a){return this.offset=a,this},adapter:function(a){return a},getByAttr:function(a,b){var c=null;return this.items.forEach(function(d){(!isNaN(Number(d.get(a)))&&Number(d.get(a))===Number(b)||String(d.get(a))===String(b))&&(c=d)}),c},getArrayByAttr:function(a,b){var c=[];return this.items.forEach(function(d){(!isNaN(Number(d.get(a)))&&Number(d.get(a))===Number(b)||String(d.get(a))===String(b))&&c.push(d)}),c},getById:function(a){return this.getByAttr("id",a)},getByClientId:function(a){var b=null;return this.items.forEach(function(c,d){c.cid===a&&(b=c)}.bind(this)),b},getItems:function(){return this.items},getByIndex:function(a){return this.items[a]},add:function(a){return this.items.push(a),this.trigger("add"),this.trigger("change"),this},remove:function(a){return this.items.forEach(function(b,c){b.get("id")===a&&(this.items.splice(c,1),this.trigger("remove",{id:b.id,cid:b.cid}),this.trigger("change"))}.bind(this)),this},removeByClientId:function(a){return this.items.forEach(function(b,c){b.cid===a&&(this.items.splice(c,1),this.trigger("remove",{id:b.id,cid:b.cid}),this.trigger("change"))}.bind(this)),this},forEach:function(a){return this.items.forEach(a),this},map:function(a){return this.items.map(a)},forEachAsync:function(a,b){var d=function(a,e){this.getLength(!0)>e?a(this.items[e],e,d.bind(this,a,e+1)):c.isFunction(b)&&b()};return this.getLength(!0)&&a(this.items[0],0,d.bind(this,a,1)),this},filter:function(a){return this.items.filter(a)},clear:function(a){return a=c.extend({destroy:!0},a),a.destroy&&this.forEach(function(a){a.destroy()}),this.items=[],this.offset=0,this},getLength:function(a){var b;return b=a?this.items:this.items.filter(function(a){return!a.isRemoved()}),b.length},getLimit:function(){return this.limit||this.options.limit},setLimit:function(a){return this.limit=a,this},toJSON:function(){var a=[];return this.forEach(function(b){a.push(b.toJSON())}),a}},"protected":{getUrl:function(){return(d.get("_sp_model")||"")+this.options.url},getFetchParams:function(){return this.ajaxParams},getFetchParamsWithOffset:function(){return c.extend({},this.ajaxParams,this.getFetchParams(),{offset:this.offset,limit:this.getLimit()})},getFetchSettings:function(){return c.extend({url:this.getUrl()},this.ajaxSettings)}}});return e}),define("page",["view","router","utils/ajax","utils/helpers","utils/cookie"],function(a,b,c,d,e){"use strict";var f=a.extend({props:{url:"",pageName:"",defaultOptions:{isRunTimeCreated:!1,isNeedLoad:!0,loadDataType:"json",pageOptionsSelector:".b-page-config"},vars:{isAbortedState:!1,pageResponse:{}}},"public":{initPage:function(){var a=this.$el.find(this.options.pageOptionsSelector);return a.length&&(this.pageOptions=JSON.parse(a.html().replace(/\r|\n|\t|\s{2,}/g,""))),this.trigger("pageLoad",{page:this.getPageName()}),this},setOptions:function(a){return d.isPlainObject(a)&&d.extend(!0,this.options,a),this},load:function(){var a=this.getLoadSettings();this.xhr=c.send(d.extend(a),{data:this.getLoadParams()}).success(function(a){a.isRedirect?b.go(a.location):a.request&&a.request.path!==window.location.pathname?b.checkRoutes({url:a.request.path},!0,a):this.onLoadSuccess(a)}.bind(this)).error(function(){this.onLoadError()}.bind(this))},abort:function(){return this.isAbortedState=!0,this.xhr.abort(),this},isPending:function(){return this.xhr&&"pending"===this.xhr.state()},isAborted:function(){return this.isAbortedState},isRunTimeCreated:function(){return this.options.isRunTimeCreated},isNeedLoad:function(){return this.options.isNeedLoad},setApp:function(a){return this.app=a,this},setPageName:function(a){return this.pageName=a,this},getPageName:function(){return this.pageName||!1},getTitle:function(){return""}},"protected":{getUrl:function(){return(e.get("_sp_pages")||"")+this.url},adapter:function(a){return a},getResponse:function(){return this.pageResponse},setResponse:function(a){return this.pageResponse=d.extend({},!0,this.pageResponse,a),this},getLoadParams:function(){return{}},getLoadSettings:function(){return{url:this.getUrl(),dataType:this.options.loadDataType}},setPageTitle:function(){document.title=this.getTitle()},onLoadSuccess:function(a){this.setResponse(this.adapter(a)),this.setPageTitle(),this.render("main",this.getResponse())},onLoadError:function(){this.trigger("error")}}});return f}),define("config",[],function(){"use strict";return{env:"prod"}}),define("main",["event","model","view","router","collection","page","config"],function(a,b,c,d,e,f,g){"use strict";return{Event:a,Model:b,View:c,Router:d,Collection:e,Page:f,CONFIG:g}}),function(){"use strict";define("nerve",["main"],function(a){return a})}();